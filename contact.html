<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contact & Orders — Bruno's Aquariums</title>

  <!-- Reef theme CSS -->
  <link rel="stylesheet" href="assets/css/styles.css?v=20" />
  <link rel="icon" href="assets/img/favicon.png" />

  <!-- Meta -->
  <meta name="description" content="Request fish & corals, order equipment, or book maintenance. Saltwater & freshwater specialists in Huron, SD." />
  <meta property="og:title" content="Bruno's Aquariums — Contact & Orders" />
  <meta property="og:description" content="Request livestock, equipment, or maintenance. Secure form with quick responses." />
  <meta property="og:image" content="assets/img/brunos-logo.png" />

  <!-- Page-local helpers (chips + layout tweaks) -->
  <style>
    /* Page container width */
    main .wrap { max-width: 980px; margin: 0 auto; padding: 0 1rem; }

    /* Stack form + info card */
    .stack { display: grid; gap: 1.25rem; grid-template-columns: 1fr; }
    @media (min-width: 980px){ .stack { grid-template-columns: 2fr 1fr; } }

    /* Chips theme’d to reef colors */
    .chips { display:flex; flex-wrap:wrap; gap:.5rem; justify-content:center }
    .chip{
      --b: var(--ocean-600);
      display:inline-flex; align-items:center; gap:.45rem;
      padding:.5rem .75rem; border-radius:999px;
      border:1.5px solid var(--b); background: rgba(12,166,166,.08);
      cursor:pointer; user-select:none; transition: .15s ease;
      font-size:.95rem; color: var(--ink);
      position:relative;
    }
    .chip input{
      position:absolute; width:1px; height:1px; opacity:0; pointer-events:none;
    }
    .chip.selected{ background: var(--chip-bg); color:var(--chip-text); border-color: var(--chip-border); }
    .chip .other-input{
      display:none; background:#fff; border:1px solid var(--ocean-600);
      border-radius:.5rem; padding:.35rem .5rem; color:var(--ink); width:16ch;
    }
    .chip.other-active .other-input{ display:inline-block; }

    /* Groups */
    .group{ margin-top:1rem; text-align:center }
    .group h3{ margin:.2rem 0 .4rem }
    .small{ font-size:.9rem; opacity:.82 }

    /* Two-up inputs that collapse on mobile */
    .two-col{ display:grid; grid-template-columns:1fr 1fr; gap:1rem }
    @media(max-width:700px){ .two-col{ grid-template-columns:1fr } }

    .divider{ height:1px; background: rgba(0,0,0,.08); margin:1rem 0 }

    /* Map wrapper */
    .map-outer{ border:1px solid rgba(0,0,0,.08); border-radius:18px; overflow:hidden; background:#fff }
    .map-outer iframe{ display:block; width:100%; height:260px; border:0 }

    /* Summary card */
    .summary{
      margin-top:1rem; padding:1rem; border:1px solid rgba(0,0,0,.08);
      border-radius:18px; background:#fff; box-shadow: var(--shadow);
    }
    .summary h3{ margin:.2rem 0 .6rem; text-align:center }
    .summary dl{ display:grid; grid-template-columns:auto 1fr; gap:.4rem 1rem; margin:0 }
    .summary dt{ opacity:.8 }
    .summary dd{ margin:0 }
  </style>
</head>

<body>
  <!-- Header (shared across site) -->
  <header class="site-header" role="banner">
    <div class="container header-inner">
      <a class="brand" href="index.html" aria-label="Bruno's Aquariums — Home">
        <picture>
          <source srcset="assets/img/brunos-logo.svg" type="image/svg+xml">
          <img class="logo-img" src="assets/img/brunos-logo.png" alt="Bruno's Aquariums logo" loading="eager" />
        </picture>
        <span class="brand-text">Bruno's Aquariums</span>
      </a>

      <button class="nav-toggle" aria-controls="site-nav" aria-expanded="false">Menu</button>
      <nav id="site-nav" class="site-nav" role="navigation" aria-label="Main">
        <ul>
          <li><a href="aquariums.html">Aquariums</a></li>
          <li><a href="accessories.html">Accessories</a></li>
          <li><a href="livestock.html">Fish & Corals</a></li>
          <li><a href="maintenance.html">Maintenance</a></li>
          <li><a href="about.html">About</a></li>
          <li><a href="faq.html">FAQ</a></li>
          <li><a class="btn-ghost" href="appointments.html">Book Appointment</a></li>
          <li><a class="btn active" href="contact.html">Contact</a></li>
        </ul>
      </nav>
    </div>
  </header>

  <main class="content">
    <!-- HERO -->
    <section class="hero section">
      <div class="container">
        <h1>Contact & Order Request</h1>
        <p>Pick what you need (fish, gear, or maintenance), add details, and we’ll reply fast.</p>
      </div>
    </section>

    <!-- Wave divider -->
    <svg class="wave-sep" viewBox="0 0 1440 90" preserveAspectRatio="none" aria-hidden="true">
      <path d="M0,60 C240,100 480,20 720,60 C960,100 1200,20 1440,60 L1440,90 L0,90 Z"></path>
    </svg>

    <!-- FORM + INFO -->
    <section class="wrap section" aria-label="Contact form and store information">
      <div class="stack">
        <!-- Secure form (Formspree) -->
        <form class="card" id="contactForm"
              action="https://formspree.io/f/mldworzo"
              method="POST" autocomplete="on" novalidate>
          <h2 style="text-align:center">Your Info</h2>

          <label class="required" for="name">Full Name</label>
          <input id="name" name="name" type="text" autocomplete="name" required />

          <div class="two-col">
            <div>
              <label class="required" for="email">Email</label>
              <input id="email" name="email" type="email" autocomplete="email" required />
            </div>
            <div>
              <label for="phone">Phone</label>
              <input id="phone" name="phone" type="tel" inputmode="tel" autocomplete="tel" placeholder="787-233-3313" />
            </div>
          </div>

          <div class="divider"></div>

          <!-- Tank Type & Size -->
          <h2 style="text-align:center">Tank Type & Size</h2>

          <!-- Tank Type (radio) -->
          <fieldset class="group" aria-labelledby="tank-type-label">
            <legend id="tank-type-label"><h3>Freshwater or Saltwater?</h3></legend>
            <div class="chips" data-group="tank_type" role="radiogroup" aria-label="Tank Type">
              <label class="chip"><input type="radio" name="tank_type_radio" value="Freshwater" />Freshwater</label>
              <label class="chip"><input type="radio" name="tank_type_radio" value="Saltwater" />Saltwater</label>
              <label class="chip chip--other">
                <input type="radio" name="tank_type_radio" value="Other" />Other
                <input class="other-input" type="text" placeholder="Brackish, pond…" aria-label="Other tank type" />
              </label>
            </div>
          </fieldset>

          <!-- Tank Size (radio) -->
          <fieldset class="group" aria-labelledby="tank-size-label">
            <legend id="tank-size-label"><h3>Tank Size</h3></legend>
            <div class="chips" data-group="tank_size" role="radiogroup" aria-label="Tank Size">
              <label class="chip"><input type="radio" name="tank_size_radio" value="10–20 gal" />10–20 gal</label>
              <label class="chip"><input type="radio" name="tank_size_radio" value="29–40 gal" />29–40 gal</label>
              <label class="chip"><input type="radio" name="tank_size_radio" value="40 breeder" />40 breeder</label>
              <label class="chip"><input type="radio" name="tank_size_radio" value="55–75 gal" />55–75 gal</label>
              <label class="chip"><input type="radio" name="tank_size_radio" value="90–120 gal" />90–120 gal</label>
              <label class="chip"><input type="radio" name="tank_size_radio" value="150–220 gal" />150–220 gal</label>
              <label class="chip chip--other">
                <input type="radio" name="tank_size_radio" value="Custom" />Custom
                <input class="other-input" type="text" placeholder="e.g. 72x30x24 (~225g)" aria-label="Custom size" />
              </label>
            </div>
          </fieldset>

          <div class="divider"></div>

          <h2 style="text-align:center">What are you looking for?</h2>
          <p class="small" style="text-align:center;margin-top:-.25rem">Check all that apply. Your choices will be summarized below.</p>

          <!-- Saltwater fish -->
          <fieldset class="group">
            <legend><h3>Saltwater Fish</h3></legend>
            <div class="chips" data-group="saltwater">
              <label class="chip"><input type="checkbox" name="saltwater_fish[]" value="Clownfish" />Clownfish</label>
              <label class="chip"><input type="checkbox" name="saltwater_fish[]" value="Gobies" />Gobies</label>
              <label class="chip"><input type="checkbox" name="saltwater_fish[]" value="Blennies" />Blennies</label>
              <label class="chip"><input type="checkbox" name="saltwater_fish[]" value="Wrasses" />Wrasses</label>
              <label class="chip"><input type="checkbox" name="saltwater_fish[]" value="Tangs (by order)" />Tangs</label>
              <label class="chip"><input type="checkbox" name="saltwater_fish[]" value="Cardinals" />Cardinals</label>
              <label class="chip"><input type="checkbox" name="saltwater_fish[]" value="Firefish" />Firefish</label>
              <label class="chip"><input type="checkbox" name="saltwater_fish[]" value="Damsels" />Damsels</label>
              <label class="chip chip--other">
                <input type="checkbox" value="__OTHER__" />Other
                <input class="other-input" type="text" placeholder="Specify…" aria-label="Other saltwater fish"/>
              </label>
            </div>
          </fieldset>

          <!-- Freshwater fish -->
          <fieldset class="group">
            <legend><h3>Freshwater Fish</h3></legend>
            <div class="chips" data-group="freshwater">
              <label class="chip"><input type="checkbox" name="freshwater_fish[]" value="Tetras (Neon/Cardinal)" />Tetras</label>
              <label class="chip"><input type="checkbox" name="freshwater_fish[]" value="Guppies/Endlers" />Guppies</label>
              <label class="chip"><input type="checkbox" name="freshwater_fish[]" value="Livebearers (Platies/Swordtails)" />Livebearers</label>
              <label class="chip"><input type="checkbox" name="freshwater_fish[]" value="Corydoras" />Corydoras</label>
              <label class="chip"><input type="checkbox" name="freshwater_fish[]" value="Plecos" />Plecos</label>
              <label class="chip"><input type="checkbox" name="freshwater_fish[]" value="Angelfish (by order)" />Angelfish</label>
              <label class="chip"><input type="checkbox" name="freshwater_fish[]" value="Discus (by order)" />Discus</label>
              <label class="chip"><input type="checkbox" name="freshwater_fish[]" value="African Cichlids" />African Cichlids</label>
              <label class="chip"><input type="checkbox" name="freshwater_fish[]" value="Dwarf Cichlids (Kribensis/Rams)" />Dwarf Cichlids</label>
              <label class="chip chip--other">
                <input type="checkbox" value="__OTHER__" />Other
                <input class="other-input" type="text" placeholder="Specify…" aria-label="Other freshwater fish"/>
              </label>
            </div>
          </fieldset>

          <!-- Corals & inverts -->
          <fieldset class="group">
            <legend><h3>Corals & Inverts</h3></legend>
            <div class="chips" data-group="corals">
              <label class="chip"><input type="checkbox" name="corals_inverts[]" value="Soft Corals" />Soft</label>
              <label class="chip"><input type="checkbox" name="corals_inverts[]" value="LPS Corals" />LPS</label>
              <label class="chip"><input type="checkbox" name="corals_inverts[]" value="SPS Corals" />SPS</label>
              <label class="chip"><input type="checkbox" name="corals_inverts[]" value="Shrimp" />Shrimp</label>
              <label class="chip"><input type="checkbox" name="corals_inverts[]" value="Snails" />Snails</label>
              <label class="chip"><input type="checkbox" name="corals_inverts[]" value="Hermit Crabs" />Hermits</label>
              <label class="chip"><input type="checkbox" name="corals_inverts[]" value="Anemones" />Anemones</label>
              <label class="chip chip--other">
                <input type="checkbox" value="__OTHER__" />Other
                <input class="other-input" type="text" placeholder="Specify…" aria-label="Other coral/invert"/>
              </label>
            </div>
          </fieldset>

          <!-- Equipment -->
          <fieldset class="group">
            <legend><h3>Equipment / Supplies</h3></legend>
            <div class="chips" data-group="equipment">
              <label class="chip"><input type="checkbox" name="equipment[]" value="Filtration (HOB/Canister/Skimmer)" />Filtration</label>
              <label class="chip"><input type="checkbox" name="equipment[]" value="Pumps & Flow (Return/Wavemaker)" />Pumps & Flow</label>
              <label class="chip"><input type="checkbox" name="equipment[]" value="Lighting (Reef/Planted)" />Lighting</label>
              <label class="chip"><input type="checkbox" name="equipment[]" value="Heaters & Controllers" />Heaters</label>
              <label class="chip"><input type="checkbox" name="equipment[]" value="Water & Testing (RO/DI, salt mix, kits)" />Water & Testing</label>
              <label class="chip"><input type="checkbox" name="equipment[]" value="Substrate/Rock (Sand, Gravel, Aquasoil, Dry Rock)" />Substrate & Rock</label>
              <label class="chip"><input type="checkbox" name="equipment[]" value="Plumbing (Bulkheads, PVC, Valves)" />Plumbing</label>
              <label class="chip"><input type="checkbox" name="equipment[]" value="Food (Flake, Pellet, Frozen, Coral)" />Food</label>
              <label class="chip"><input type="checkbox" name="equipment[]" value="Maintenance Tools" />Maintenance Tools</label>
              <label class="chip chip--other">
                <input type="checkbox" value="__OTHER__" />Other
                <input class="other-input" type="text" placeholder="Specify…" aria-label="Other equipment"/>
              </label>
            </div>
          </fieldset>

          <!-- Maintenance -->
          <fieldset class="group">
            <legend><h3>Maintenance & Care</h3></legend>
            <div class="chips" data-group="maintenance_services">
              <label class="chip"><input type="checkbox" name="maintenance_services[]" value="Starter Clean" />Starter Clean</label>
              <label class="chip"><input type="checkbox" name="maintenance_services[]" value="Standard Care" />Standard Care</label>
              <label class="chip"><input type="checkbox" name="maintenance_services[]" value="Premium Reef" />Premium Reef</label>
              <label class="chip chip--other">
                <input type="checkbox" value="__OTHER__" />Emergency / Other
                <input class="other-input" type="text" placeholder="Specify…" aria-label="Other maintenance"/>
              </label>
            </div>
            <div class="chips" data-group="maintenance_frequency" style="margin-top:.5rem">
              <label class="chip"><input type="checkbox" name="maintenance_frequency[]" value="One-time" />One-time</label>
              <label class="chip"><input type="checkbox" name="maintenance_frequency[]" value="Weekly" />Weekly</label>
              <label class="chip"><input type="checkbox" name="maintenance_frequency[]" value="Bi-weekly" />Bi-weekly</label>
              <label class="chip"><input type="checkbox" name="maintenance_frequency[]" value="Monthly" />Monthly</label>
            </div>
          </fieldset>

          <!-- Live summary -->
          <div class="summary" id="selectionSummary" aria-live="polite">
            <h3>Your Selections</h3>
            <dl></dl>
            <p class="small" style="margin-top:.4rem">We’ll include this summary in the email we receive.</p>
          </div>

          <div class="divider"></div>

          <!-- Details -->
          <h2 style="text-align:center">Details</h2>
          <div class="two-col">
            <div>
              <label for="when">Preferred Date</label>
              <input id="when" name="preferred_date" type="date" />
            </div>
            <div>
              <label>Contact Preference</label>
              <div class="chips" role="radiogroup" aria-label="Contact Preference" style="justify-content:flex-start">
                <label class="chip"><input type="radio" name="contact_preference" value="Either" checked />Either</label>
                <label class="chip"><input type="radio" name="contact_preference" value="Phone" />Phone</label>
                <label class="chip"><input type="radio" name="contact_preference" value="Email" />Email</label>
              </div>
            </div>
          </div>

          <label for="address">Service Address (for maintenance)</label>
          <input id="address" name="service_address" type="text" placeholder="Street, City, ZIP" />

          <label for="notes">Notes / Special requests</label>
          <textarea id="notes" name="notes" rows="6" placeholder="Species list, sizes/quantities, model names, tank size, timing, etc."></textarea>

          <!-- Formspree helpers -->
          <input type="hidden" name="_subject" value="New request from Bruno's Aquariums" />
          <input type="hidden" name="_template" value="table" />
          <input type="hidden" name="_redirect" value="thank-you.html" />
          <input type="text" name="_gotcha" style="display:none" />

          <!-- Hidden organized fields (filled by JS before submit) -->
          <input type="hidden" name="tank_type_selected" />
          <input type="hidden" name="tank_size_selected" />
          <input type="hidden" name="saltwater_selected" />
          <input type="hidden" name="freshwater_selected" />
          <input type="hidden" name="corals_selected" />
          <input type="hidden" name="equipment_selected" />
          <input type="hidden" name="maintenance_services_selected" />
          <input type="hidden" name="maintenance_frequency_selected" />
          <input type="hidden" name="selection_summary" />

          <button type="submit" class="btn" style="display:block;margin:1rem auto 0">Send Request</button>
          <p class="small" style="text-align:center">This form submits securely over HTTPS. You’ll see a confirmation if it sends successfully.</p>
        </form>

        <!-- Info card -->
        <aside class="card" aria-label="Store information">
          <h2 style="text-align:center">Visit Bruno's Aquariums</h2>
          <p style="text-align:center"><strong>Address</strong><br />
            <a href="https://maps.google.com/?q=258%20Dakota%20Ave%20S,%20Huron,%20SD%2057350" target="_blank" rel="noopener">
              258 Dakota Ave S, Huron, SD 57350</a>
          </p>
          <p style="text-align:center">
            <strong>Phones</strong><br />
            <a href="tel:+17872333313">787-233-3313</a> — Jose (Owner)<br />
            <a href="tel:+16053506478">605-350-6478</a> — Ian
          </p>

          <h3 style="text-align:center">Hours</h3>
          <p style="text-align:center">Mon–Sun 10:00am–8:00pm • Su Closed</p>

          <div class="map-outer" aria-label="Google Map">
            <iframe loading="lazy" referrerpolicy="no-referrer-when-downgrade"
              src="https://www.google.com/maps?q=258%20Dakota%20Ave%20S,%20Huron,%20SD%2057350&output=embed"></iframe>
          </div>

          <p class="small" style="margin-top:.6rem; text-align:center">
            Prefer to pick a time directly? <a class="link" href="appointments.html">Book an appointment</a>.
          </p>
        </aside>
      </div>
    </section>

    <!-- Wave divider -->
    <svg class="wave-sep" viewBox="0 0 1440 90" preserveAspectRatio="none" aria-hidden="true">
      <path d="M0,60 C240,100 480,20 720,60 C960,100 1200,20 1440,60 L1440,90 L0,90 Z"></path>
    </svg>

    <!-- CTA -->
    <section class="banner section" aria-label="Need something else?">
      <div class="container">
        <p style="margin:.25rem 0">Need emergency service or a custom order?</p>
        <div style="display:flex;gap:.6rem;flex-wrap:wrap;justify-content:center">
          <a class="btn" href="appointments.html">Book Appointment</a>
          <a class="btn-outline" href="maintenance.html">Maintenance Services</a>
        </div>
      </div>
    </section>
  </main>

  <!-- Footer (shared across site) -->
  <footer class="site-footer" role="contentinfo">
    <div class="container footer-grid">
      <div>
        <p style="display:flex;align-items:center;gap:.6rem;margin:0 0 .5rem 0;">
          <picture>
            <source srcset="assets/img/brunos-logo.svg" type="image/svg+xml">
            <img class="logo-img" src="assets/img/brunos-logo.png" alt="Bruno's Aquariums logo" style="height:20px" loading="lazy" />
          </picture>
          <strong>Bruno's Aquariums</strong>
        </p>
        <p>Freshwater & Saltwater • Tanks, Gear, Livestock • Install & Maintenance</p>
      </div>

      <div>
        <h4>Visit</h4>
        <p>
          <a href="https://maps.google.com/?q=258%20Dakota%20Ave%20S,%20Huron,%20SD%2057350" target="_blank" rel="noopener">
            258 Dakota Ave S, Huron, SD 57350
          </a>
        </p>
        <p>
          <strong>Phones</strong><br />
          <a href="tel:+17872333313">787-233-3313</a> — Jose (Owner)<br />
          <a href="tel:+16053506478">605-350-6478</a> — Ian
        </p>
      </div>

      <div>
        <h4>Connect</h4>
        <p>
          <a href="https://www.facebook.com/profile.php?id=61580495271761" target="_blank" rel="noopener">Facebook Page</a><br />
          <a href="https://share.google/d9pG6lvKEcFm08mr8" target="_blank" rel="noopener">Google Search: Bruno's Aquarium</a><br />
          <a href="mailto:Brunosaquarium@gmail.com">Brunosaquarium@gmail.com</a>
        </p>
      </div>

      <div>
        <h4>Hours</h4>
        <p>Mon–Sat 10:00am–8:00pm • Su Closed</p>
      </div>
    </div>

    <div class="container legal">
      <p>© <span id="year"></span> Bruno's Aquariums. All rights reserved.</p>
    </div>
  </footer>

  <!-- JS -->
  <script src="assets/js/main.js?v=11"></script>

  <!-- Selections logic -->
  <script>
    (function(){
      const groups = [
        { key:'tank_type',             label:'Tank Type',                hidden:'tank_type_selected',       type:'radio' },
        { key:'tank_size',             label:'Tank Size',                hidden:'tank_size_selected',       type:'radio' },
        { key:'saltwater',             label:'Saltwater Fish',           hidden:'saltwater_selected' },
        { key:'freshwater',            label:'Freshwater Fish',          hidden:'freshwater_selected' },
        { key:'corals',                label:'Corals & Inverts',         hidden:'corals_selected' },
        { key:'equipment',             label:'Equipment',                hidden:'equipment_selected' },
        { key:'maintenance_services',  label:'Maintenance Services',     hidden:'maintenance_services_selected' },
        { key:'maintenance_frequency', label:'Maintenance Frequency',    hidden:'maintenance_frequency_selected' },
      ];

      const form = document.getElementById('contactForm');
      const summary = document.getElementById('selectionSummary').querySelector('dl');

      // Toggle chip visuals & "Other" inputs
      document.querySelectorAll('.chips').forEach(chips => {
        chips.addEventListener('change', e => {
          const input = e.target;
          if (input.tagName !== 'INPUT') return;
          const chip = input.closest('.chip');
          if (!chip) return;

          if (input.type === 'checkbox') {
            chip.classList.toggle('selected', input.checked);
          } else if (input.type === 'radio') {
            // clear selection within this chips group
            chips.querySelectorAll('.chip').forEach(c => c.classList.remove('selected'));
            chips.querySelectorAll('input[type="radio"]').forEach(r => r.checked = false);
            input.checked = true;
            chip.classList.add('selected');
          }

          // "Other" text input handling
          const isOther = chip.classList.contains('chip--other');
          const otherField = chip.querySelector('.other-input');
          if (isOther) {
            if (input.checked) {
              chip.classList.add('other-active');
              otherField && otherField.focus();
            } else {
              chip.classList.remove('other-active');
              if (otherField) otherField.value = '';
            }
          } else {
            // If a non-other radio was selected, hide any other field in group
            chips.querySelectorAll('.chip--other').forEach(co => {
              co.classList.remove('other-active');
              const f = co.querySelector('.other-input');
              if (f) f.value = '';
            });
          }
          updateSummary();
        });

        chips.addEventListener('input', e => {
          if (e.target.classList.contains('other-input')) updateSummary();
        });
      });

      function getSelections(){
        const data = {};
        groups.forEach(g => {
          const wrap = document.querySelector('.chips[data-group="'+g.key+'"]');
          if (!wrap) return;

          const items = [];
          wrap.querySelectorAll('.chip').forEach(chip => {
            const inp = chip.querySelector('input');
            if (!inp) return;

            if (inp.type === 'checkbox' && inp.checked) {
              const isOther = chip.classList.contains('chip--other');
              if (isOther) {
                const val = (chip.querySelector('.other-input')?.value || '').trim();
                if (val) items.push(val);
              } else {
                const text = chip.textContent.replace(/\s+$/, '').trim();
                items.push(text.replace(/^Other$/,'').trim());
              }
            }

            if (inp.type === 'radio' && inp.checked) {
              const isOther = chip.classList.contains('chip--other');
              if (isOther) {
                const val = (chip.querySelector('.other-input')?.value || '').trim();
                if (val) items.push(val);
                else items.push('Other');
              } else {
                const text = chip.textContent.replace(/\s+$/, '').trim();
                items.push(text.replace(/^Other$/,'').trim());
              }
            }
          });

          // radios should be single-value; checkboxes may be multi
          if ((g.type === 'radio') && items.length > 1) {
            data[g.key] = [items[0]];
          } else {
            const sorted = (g.type === 'radio') ? items : items.filter(Boolean).sort((a,b)=>a.localeCompare(b, undefined, {sensitivity:'base'}));
            data[g.key] = sorted;
          }
        });
        return data;
      }

      function updateSummary(){
        const data = getSelections();
        summary.innerHTML = '';
        groups.forEach(g => {
          const list = data[g.key];
          if (list && list.length) {
            const dt = document.createElement('dt'); dt.textContent = g.label + ':';
            const dd = document.createElement('dd'); dd.textContent = list.join(', ');
            summary.appendChild(dt); summary.appendChild(dd);
          }
        });
        if (!summary.children.length) {
          const dt = document.createElement('dt'); dt.textContent = 'Selections:';
          const dd = document.createElement('dd'); dd.textContent = 'None yet. Pick items above.';
          summary.appendChild(dt); summary.appendChild(dd);
        }
      }

      form.addEventListener('submit', () => {
        const data = getSelections();
        groups.forEach(g => {
          const hidden = form.querySelector('input[name="'+g.hidden+'"]');
          if (hidden) hidden.value = (data[g.key] || []).join(', ');
        });

        const parts = groups.map(g => {
          const arr = data[g.key] || [];
          return arr.length ? (g.label + ': ' + arr.join(', ')) : null;
        }).filter(Boolean);

        const summaryHidden = form.querySelector('input[name="selection_summary"]');
        if (summaryHidden) summaryHidden.value = parts.join(' | ');
      });

      updateSummary();
    })();
  </script>
</body>
</html>
